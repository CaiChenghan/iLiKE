<div class="article">
  <% var years = {};
      site.posts.sort('date').reverse().forEach(function(post){
          var year = post.date.year()
          if(years[year]===undefined){
              years[year] = [];
          }
          years[year].push(post);
      });
    %>    
    <% Object.keys(years).reverse().forEach(function(year){  %>
      <div class="year-list">
        <h3><%= year %></h3>
        <ul>
          <% years[year].map(function(post){  %>
            <li >
              <time><%= date(post.date) %></time>
              <a href="<%- config.root %><%- post.path %>">
                <%- post.title ? post.title : __('untitled') %>
              </a>
            </li>
          <% }) %>
        </ul>
      </div>
    <% }) %> 
</div>